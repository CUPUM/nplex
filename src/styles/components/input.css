/*
Primitive input component
*/
.input {
	padding: 0 var(--base-padding);
	text-overflow: ellipsis;
	.input-peer + & {
		padding-left: calc(var(--base-padding) - var(--base-inset));
	}
}
textarea.input {
	padding-block: calc(var(--base-padding) - 0.3em);
	line-height: 1.6em;
	min-height: var(--base-size);
}
.input-group {
	.input {
		background-color: transparent;
		align-self: stretch;
		border-radius: inherit;
		outline: none;
		flex: 1;
	}
}
.input:not(.input-group *),
.input-group {
	--nested-base-size: calc(var(--base-size) - 2 * var(--base-inset));
	--nested-base-radius: calc(var(--base-radius) - var(--base-inset));
	display: inline-flex;
	flex-direction: row;
	align-items: center;
	border-radius: var(--base-radius);
	&:not(textarea) {
		height: var(--base-size);
	}

	&:hover {
		.input-icon {
			opacity: 1;
			transform: scale(1);
		}
	}

	&:focus,
	&:has(.input:focus) {
		outline: var(--base-focus-ring);

		.input-icon {
			opacity: 1;
			transform: scale(0.95);
		}
	}

	.input-peer {
		--base-size: var(--nested-base-size);
		--base-radius: var(--nested-base-radius);
		display: flex;
		gap: var(--base-inset);
		flex-direction: row;
		padding: var(--base-inset);
	}
	.input-icon + .input-peer {
		margin-left: var(--base-padding);
		padding-left: 0;
	}
	.input + .input-peer {
		padding-left: 0;
	}

	.input-icon {
		flex: none;
		width: 1.25em;
		stroke-width: 2.5;
		opacity: 0.5;
		transform: scale(0.95);
		transition:
			opacity var(--duration-medium) ease-out,
			transform var(--duration-fast) ease-out;
		&:last-child {
			margin-right: var(--base-padding);
		}
	}
	.input-peer + .input-icon {
		margin-left: calc(var(--base-padding) - var(--base-inset));
	}
	.input-icon:first-child {
		margin-left: var(--base-padding);
	}

	/*
	Default variant
	*/
	&:not(.outlined) {
		font-weight: 350;
		color: var(--color-neutral-700);
		background-color: color-mix(in srgb, var(--color-neutral-500) 10%, transparent);
		:--dark & {
			color: var(--color-neutral-300);
		}
		&:hover {
			color: var(--color-neutral-800);
			box-shadow: 0 0 0 var(--base-border-size) rgba(0, 0, 0, 0.1);
			:--dark & {
				color: var(--color-neutral-200);
				box-shadow: 0 0 0 var(--base-border-size) rgba(255, 255, 255, 0.1);
			}
		}
		&:focus,
		&:has(.input:focus) {
			color: var(--color-neutral-800);
			background-color: white;
			:--dark & {
				color: var(--color-neutral-200);
				background-color: color-mix(in srgb, var(--color-neutral-950) 25%, transparent);
			}
		}
		&[data-loading] {
			color: color-mix(in srgb, var(--color-neutral-500) 50%, transparent);
			transform: scale(0.95);
			pointer-events: none;
			transition: all var(--button-duration-out) ease-out;
		}
	}

	/*
	Outlined variant
	*/
	&.outlined {
		color: var(--color-neutral-800);
		border: var(--base-border);
		:--dark & {
			color: var(--color-neutral-200);
		}
		&:hover {
			color: var(--color-neutral-950);
			background-color: color-mix(in srgb, var(--color-neutral-400) 25%, transparent);
			border-color: transparent;
			:--dark & {
				color: var(--color-neutral-50);
				background-color: color-mix(in srgb, var(--color-neutral-600) 25%, transparent);
				border-color: transparent;
			}
		}
		&:focus,
		&:has(.input:focus) {
			background-color: white;
			:--dark & {
				background-color: color-mix(in srgb, var(--color-neutral-950) 25%, transparent);
			}
		}
		&[data-loading] {
			color: color-mix(in srgb, var(--color-neutral-500) 50%, transparent);
			transform: scale(0.95);
			pointer-events: none;
			transition: all var(--button-duration-out) ease-out;
		}
	}
}
