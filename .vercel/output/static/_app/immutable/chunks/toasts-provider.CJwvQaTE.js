var yt=Object.defineProperty;var Z=i=>{throw TypeError(i)};var bt=(i,t,e)=>t in i?yt(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var g=(i,t,e)=>bt(i,typeof t!="symbol"?t+"":t,e),j=(i,t,e)=>t.has(i)||Z("Cannot "+e);var n=(i,t,e)=>(j(i,t,"read from private field"),e?e.call(i):t.get(i)),c=(i,t,e)=>t.has(i)?Z("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),b=(i,t,e,s)=>(j(i,t,"write to private field"),s?s.call(i,e):t.set(i,e),e),T=(i,t,e)=>(j(i,t,"access private method"),e);import"./disclose-version.Bg9kRutz.js";import{a as h,c as B,t as A,b as v,s as R,f as D}from"./template.CYbmh4h0.js";import{b as W,s as L,g as _,d as Tt,p as lt,t as G,a as ft,f as xt,u as $}from"./runtime.DjgYXsSk.js";import{e as At}from"./each.CVL6L7bf.js";import{a as St}from"./actions.DlEPaH3k.js";import{t as tt,e as wt,f as et,c as ht,i as Rt}from"./index.B9DhiAzX.js";import{s as kt,a as Ct}from"./store.9ZQN09u1.js";import{n as Ot,p as Ft}from"./stores.yKo6NxPo.js";import{p as Et}from"./proxy.Cn1c9iIJ.js";import{i as k}from"./if.C12WoQaB.js";import{h as st}from"./html.CW-qCIdJ.js";import{s as Mt}from"./snippet.CJwMoSRa.js";import{c as Nt}from"./svelte-component.05q_ogwX.js";import{e as Ut,a as it}from"./attributes.BNVf-LtF.js";import{s as Lt}from"./props.B2871YNw.js";import{X as Pt}from"./x.DtZFMutn.js";import{f as qt}from"./index.DpRu7_UM.js";import{w as It,g as Q,c as zt,d as Bt}from"./entry.BF9yKNlN.js";import{o as Dt}from"./index-client.fGmTI9vP.js";function Ht(i,{target:t=document.body,anchor:e}={}){return e?t.insertBefore(i,e):t.appendChild(i),{destroy(){}}}const mt={DEFAULT:"default",ERROR:"error",SUCCESS:"success",NOTIFICATION:"notification"},Jt={[mt.ERROR]:"alert"};var P,X,C,d,O,q,F,x,E,p,K,dt,pt,ct;let Vt=(ct=class{constructor({type:t=mt.DEFAULT,duration:e=5e3,dismissable:s=!0,content:o},r,a){c(this,p);c(this,P);g(this,"close");c(this,X,Tt(()=>n(this,d)?Math.min(_(n(this,x))/n(this,d),1):0));c(this,C);c(this,d);c(this,O);c(this,q);c(this,F,W(!0));c(this,x,W(0));c(this,E);b(this,P,a),b(this,C,t),b(this,d,e),b(this,O,s),b(this,q,o),this.close=u=>{const f=r.indexOf(this);return f>-1&&r.splice(f,1),r},r.push(this),n(this,d)&&requestAnimationFrame(T(this,p,K).bind(this))}get progress(){return _(n(this,X))}get toastAttributes(){const t=this;return{role:Jt[n(t,C)],onpointerenter(e){var s;T(s=t,p,dt).call(s)},onpointerleave(e){var s;T(s=t,p,pt).call(s)}}}get closeAttributes(){const t=this;return{onclick(e){n(t,O)&&t.close(e)}}}get dismissable(){return n(this,O)}get type(){return n(this,C)}get duration(){return n(this,d)}get content(){return n(this,q)}},P=new WeakMap,X=new WeakMap,C=new WeakMap,d=new WeakMap,O=new WeakMap,q=new WeakMap,F=new WeakMap,x=new WeakMap,E=new WeakMap,p=new WeakSet,K=function(t){if(n(this,E)&&_(n(this,F))&&n(this,P).playing&&(L(n(this,x),_(n(this,x))+(t-n(this,E))),_(n(this,x))>=n(this,d)))return this.close();b(this,E,t),requestAnimationFrame(T(this,p,K).bind(this))},dt=function(){L(n(this,F),!1)},pt=function(){L(n(this,F),!0)},ct);var I,M,N,gt,vt;class Wt{constructor({pauseAll:t=!1}={}){c(this,N);g(this,"options");c(this,I,W(Et([])));c(this,M,W(!0));this.options={pauseAll:t}}get all(){return _(n(this,I))}get playing(){return _(n(this,M))}get listAttributes(){const t=this;return{onpointerenter(e){var s;t.options.pauseAll&&T(s=t,N,gt).call(s)},onpointerleave(e){var s;T(s=t,N,vt).call(s)}}}add(t){return new Vt(t,_(n(this,I)),this)}}I=new WeakMap,M=new WeakMap,N=new WeakSet,gt=function(){L(n(this,M),!1)},vt=function(){L(n(this,M),!0)};var Xt=A('<progress dir="rtl" class="absolute top-0 right-[1.25rem] left-[1.25rem] h-[3px] w-auto" max="1"></progress>'),Yt=A("<section><!></section>"),jt=A('<menu class="py-[1rem] pr-[1rem]"><button><!></button></menu>'),Gt=A('<div class="flex flex-row"><div class="flex flex-col p-[1.5rem]"><!> <section><!></section></div> <!></div>'),Kt=A("<aside><!> <!></aside>");function Qt(i,t){lt(t,!0);var e=Kt();tt(5,e,()=>et,()=>({y:"50%",easing:wt,duration:350,opacity:0})),tt(6,e,()=>et,()=>({x:"100%",easing:ht,duration:250,opacity:0}));let s;var o=v(e);k(o,()=>t.instance.duration,a=>{var u=Xt();G(()=>{Ut(u,1-t.instance.progress),u.dir=u.dir}),h(a,u)});var r=R(R(o,!0));k(r,()=>"body"in t.instance.content,a=>{var u=Gt(),f=v(u),l=v(f);k(l,()=>"title"in t.instance.content,S=>{var y=Yt(),w=v(y);st(w,()=>t.instance.content.title),h(S,y)});var m=R(R(l,!0)),U=v(m);st(U,()=>t.instance.content.body);var Y=R(R(f,!0));k(Y,()=>t.instance.dismissable,S=>{var y=jt(),w=v(y);let z;var _t=v(w);Pt(_t,{}),G(()=>z=it(w,z,{class:"button button-ghost compact aspect-square rounded-full text-sm",...t.instance.closeAttributes},!0,"")),h(S,y)}),h(a,u)},a=>{var u=B(),f=D(u);k(f,()=>"snippet"in t.instance.content,l=>{var m=B(),U=D(m);Mt(U,()=>t.instance.content.snippet,()=>t.instance),h(l,m)},l=>{var m=B(),U=D(m);k(U,()=>"component"in t.instance.content,Y=>{var S=B(),y=D(S);Nt(y,()=>t.instance.content.component,(w,z)=>{z(w,Lt(()=>t.instance.content.props))}),h(Y,S)},null,!0),h(l,m)},!0),h(a,u)}),G(()=>s=it(e,s,{class:"bg-popover relative max-w-sm overflow-hidden rounded-sm text-base text-sm shadow-lg",...t.instance.toastAttributes},!0,"")),h(i,e),ft()}const Zt=encodeURIComponent,H=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function $t(i,t,e){let s=e||{},o=s.encode||Zt;if(typeof o!="function")throw new TypeError("option encode is invalid");if(!H.test(i))throw new TypeError("argument name is invalid");let r=o(t);if(r&&!H.test(r))throw new TypeError("argument val is invalid");let a=i+"="+r;if(s.maxAge!=null){let u=s.maxAge-0;if(isNaN(u)||!isFinite(u))throw new TypeError("option maxAge is invalid");a+="; Max-Age="+Math.floor(u)}if(s.domain){if(!H.test(s.domain))throw new TypeError("option domain is invalid");a+="; Domain="+s.domain}if(s.path){if(!H.test(s.path))throw new TypeError("option path is invalid");a+="; Path="+s.path}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");a+="; Expires="+s.expires.toUTCString()}if(s.httpOnly&&(a+="; HttpOnly"),s.secure&&(a+="; Secure"),s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return a}const te={clearArray:!1,clearOnNavigate:!0,clearAfterMs:0,flashCookieOptions:{path:"/",maxAge:120,httpOnly:!1,sameSite:"strict"}};function ee(i,t){return{...i,...t,flashCookieOptions:{...i.flashCookieOptions,...t==null?void 0:t.flashCookieOptions}}}class rt{constructor(t,e){g(this,"options");g(this,"_message");g(this,"_flashTimeout",0);this.options=e??te,this._message={subscribe:t.subscribe,set:(s,o)=>t.update(r=>this.update(r,s,(o==null?void 0:o.concatenateArray)??!1)),update:(s,o)=>t.update(r=>this.update(r,s(r),(o==null?void 0:o.concatenateArray)??!1))}}get message(){return this._message}get flashTimeout(){return this._flashTimeout}update(t,e,s=!1){return this._flashTimeout&&clearTimeout(this.flashTimeout),s&&Array.isArray(e)&&Array.isArray(t)?t.length>0&&e.length>0&&t[t.length-1]===e[e.length-1]?t:t.concat(e):(e!==void 0&&this.options.clearAfterMs&&(this._flashTimeout=setTimeout(()=>{this.message.set(void 0)},this.options.clearAfterMs)),e)}}class se{constructor(){g(this,"routes",new Map);g(this,"messageStore");this.messageStore=It(),this.routes.set("",new rt(this.messageStore)),Dt(()=>{for(const t of this.routes.values())clearTimeout(t.flashTimeout)})}get defaultRoute(){return this.routes.get("")}has(t){return this.routes.has(t)}getFlashMessage(t){return t?this.routes.has(t)?this.routes.get(t):this.getClosestRoute(t):this.defaultRoute}getClosestRoute(t){const e=Array.from(this.routes.keys()).filter(o=>t.includes(o));if(!e.length)return this.defaultRoute;const s=e.reduce((o,r)=>r.length>o.length?r:o);return this.routes.get(s)}createRoute(t,e,s){const o=this.getClosestRoute(t),r=new rt(this.messageStore,ee(o.options,s));return r.message.set(e),this.routes.set(t,r),r}}const J="flash",ot=new WeakMap;function V(i,t){let e=ot.get(i);return e||(e=new se,ot.set(i,e),e.getFlashMessage(Q(i).route.id).message.set(t),ie(i)),e}function ie(i){i.subscribe(t=>{const e=nt();if(e!==void 0){const s=V(i).getFlashMessage(t.route.id);s.message.set(e,{concatenateArray:!s.options.clearArray}),at(s.options.flashCookieOptions)}}),zt(t=>{var s,o;const e=(s=t==null?void 0:t.to)==null?void 0:s.route.id;if(e){const r=V(i).getFlashMessage(e);r.options.clearOnNavigate&&((o=t.from)==null?void 0:o.route.id)!=e&&r.message.set(void 0)}}),Bt(()=>{const t=nt();if(t!==void 0){const e=V(i).getFlashMessage(Q(i).route.id);e.message.set(t,{concatenateArray:!e.options.clearArray}),at(e.options.flashCookieOptions)}})}function re(i,t){const e=Q(i),s=V(i,e.data.flash);function o(){const l=s.routes.get(f());return l||(t?r():s.getClosestRoute(f()))}function r(){return s.createRoute(f(),u(),t)}const a={store:i,route:e.route.id,initialdata:e.data.flash,navigating:Ot};function u(){return a.initialdata}function f(){return a.route??""}return o()}function oe(i,t){return re(i,t).message}function at(i){document.cookie=$t(J,"",{...i,maxAge:0})}function nt(){const i=document.cookie;if(!i||!i.includes(J+"="))return;function t(s){const o={};return s?s.split(";").map(r=>r.split("=")).reduce((r,a)=>(r[decodeURIComponent(a[0].trim())]=decodeURIComponent(a[1].trim()),r),o):o}const e=t(i);if(e[J])try{return JSON.parse(e[J])}catch{}}var ae=A("<div><!></div>"),ne=A('<div class="p-gap gap-input-group-gap fixed right-0 bottom-0 flex max-h-full max-w-full flex-col items-end overflow-y-scroll"></div>');const ut=new Wt;function Oe(i,t){lt(t,!0);const e=kt(),s=()=>Ct(o,"$flash",e),o=oe(Ft);xt(()=>{s()&&(ut.add(s()),o.set(void 0))});var r=ne();At(r,95,()=>ut.all,(a,u)=>$(a),(a,u,f)=>{var l=ae();Rt(l,()=>qt,()=>({duration:200,easing:ht}));var m=v(l);Qt(m,{get instance(){return $(u)}}),h(a,l)}),St(r,a=>Ht(a)),h(i,r),ft()}export{mt as T,Oe as a,ut as t};
