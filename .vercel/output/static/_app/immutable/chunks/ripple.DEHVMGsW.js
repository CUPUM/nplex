import"./disclose-version.Bg9kRutz.js";import{p as M}from"./proxy.Cn1c9iIJ.js";import{p as C,t as u,u as d,a as I}from"./runtime.DjgYXsSk.js";import{m as N,e as X,u as Y}from"./render.B8uQQetn.js";import{e as D}from"./each.CVL6L7bf.js";import{a as S,t as R}from"./template.CYbmh4h0.js";import{t as h}from"./class.DowJDtNg.js";import{s as r}from"./style.iv2mhl8q.js";import{b as H}from"./this.C2iGNKnu.js";import{p as w}from"./props.B2871YNw.js";import{p as U}from"./css.pwYrssTK.js";import{a as j,o as k}from"./index-client.fGmTI9vP.js";var q=R('<div class="ripple nplex-v7w704"></div>'),F=R('<div class="rounded-inherit pointer-events-none absolute inset-0 overflow-hidden"></div>');const g="data-ripple-host";function re(c,n){const v=N(G,{target:c,props:n,anchor:c.firstChild||void 0});return{destroy(){Y(v)}}}function G(c,n){C(n,!0);let v=w(n,"speedSpread",3,.5),T=w(n,"durationOutro",3,1e3),i,s,m=M([]);function y(t){if(i.parentElement&&t.target instanceof Element&&t.target.closest(`[${g}]`)===i.parentElement){let L=function(p){return l.outside=!1,p},b=function(p){return l.outside=!0,p},f=function(p){var _,O;document.removeEventListener("pointerup",f),document.removeEventListener("pointercancel",f),(_=i.parentElement)==null||_.removeEventListener("pointerenter",L),(O=i.parentElement)==null||O.removeEventListener("pointerleave",b),l.outro=!0,(p.type==="pointercancel"||l.outside)&&(l.canceled=!0)};const e=i.parentElement.getBoundingClientRect(),E=t.clientX-e.left,o=t.clientY-e.top,x=Math.max(E,e.right-t.clientX),z=Math.max(o,e.bottom-t.clientY),B=2*Math.hypot(x,z),l=M({x:E,y:o,d:B,outro:!1,canceled:!1,outside:!1,done:{spread:!1,outro:!1}});m.push(l),document.addEventListener("pointerup",f),document.addEventListener("pointercancel",f),i.parentElement.addEventListener("pointerenter",L),i.parentElement.addEventListener("pointerleave",b)}}function A(t,e){t.target!==t.currentTarget||!(t.target instanceof Element)||(t.animationName==="ripple-spread"?e.done.spread=!0:t.animationName==="ripple-outro"&&(e.done.outro=!0),e.done.spread&&e.done.outro&&m.splice(m.indexOf(e),1))}j(()=>{i&&(s=i.parentElement),s&&(s.addEventListener("pointerdown",y),s.setAttribute(g,""))}),k(()=>{s&&(s.removeEventListener("pointerdown",y),s.removeAttribute(g))});var a=F();H(a,t=>i=t,()=>i),u(()=>r(a,"--ripple-blur",n.blur!=null?U(n.blur):void 0)),D(a,76,()=>m,(t,e)=>d(t),(t,e,E)=>{var o=q();u(()=>r(o,"--ripple-duration-spread",`${n.durationSpread??Math.round(d(e).d/v())??""}ms`)),u(()=>r(o,"--ripple-duration-outro",`${(n.speedOutro?Math.round(d(e).d/n.speedOutro):T())??""}ms`)),u(()=>{h(o,"outroing",d(e).outro),h(o,"canceled",d(e).canceled),h(o,"outside",d(e).outside),r(o,"--x",`${d(e).x??""}px`),r(o,"--y",`${d(e).y??""}px`),r(o,"--d",`${d(e).d??""}px`)}),X("animationend",o,x=>A(x,d(e)),!0),S(t,o)}),u(()=>{r(a,"z-index",n.zIndex),r(a,"--ripple-color",n.color),r(a,"--ripple-color-start",n.colorStart),r(a,"--ripple-color-end",n.colorEnd),r(a,"--ripple-easing-spread",n.easingSpread),r(a,"--ripple-easing-outro",n.easingOutro)}),S(c,a),I()}export{re as r};
