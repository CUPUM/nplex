<h1 align="center">
  <img width="300" height="auto" src="static/nplex-logo.svg" alt="nplex">
</h1>

## Getting started

### Setting things up

After cloning the repo, initialize the project and its dependencies locally:

```sh
pnpm install
```

### Developing

Once you've installed the dependencies, you can start a development server:

```sh
pnpm dev

# append the optional "-- --open" flag to either of these commands if you want
# to automatically open the app in a new browser tab once the server has started
```

When developping, try to constantly maintain the project's dependencies updated to their latest
version. This can be done regularly using:

```sh
pnpm up --latest
```

This allows us to profit from the latest features offered by the packages as well as contribute to
identify newly introduced bugs.

### In-house plugins and type generation

#### Database types

A great feature of Supabase and its CLI is that it offers a simple way to generate somewhat complete
types.

```sh
pnpm gen-db-types
```

It should be noted that the types generated this way come with certain limitations:

- In some cases the return type of `rpc`s is incomplete or too general
- Some cardinality automatically inferred by PostGREST may not be adequately reflected in types of
  joined tables (ex.: `one-to-one` expressed as `one-to-many`)

We attempt to answer some of these pitfalls with a [type buff](src/lib/types/databaseBuff.ts), but
for now some still need to be adressed on a per-request basis, either by forcing a type cast on the
response type of by doing a simple check.

#### Icons

The [icons definition](src/lib/utils/icons/icons.ts) used throughout the app is generated by
[a custom vite plugin](src/lib/plugins/icons/index.ts) that parses the svg files found in its,
[assets folder](src/lib/plugins/icons/assets).

This plugin generates translates the assets to a js object, and runs at `build` time and during
`dev` watch events.

#### Themes

The [project's css themes](src/styles/themes.css) are generated by
[a custom vite plugin](src/lib/plugins/themes/index.ts). It uses the themes passed to it through the
`vite.config` setup.

This generator script runs at `build` time and during `dev` watch events.

## Making it live

- [ ] List how to deploy to railway.app

## Additionnal ressources

## Notes
