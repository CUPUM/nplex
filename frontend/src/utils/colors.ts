/**
 * For reference, try ColorBox:
 * https://colorbox.io/?c0=%26p%24s%24%3D5%26p%24h%24st%24%3D130%26p%24h%24e%24%3D165%26p%24h%24c%24%3Deqo%26p%24sa%24st%24%3D0.4%26p%24sa%24e%24%3D0.9%26p%24sa%24r%24%3D1%26p%24sa%24c%24%3Deqo%26p%24b%24st%24%3D1%26p%24b%24e%24%3D0.4%26p%24b%24c%24%3Dl%26o%24n%24%3Dprimary%26o%24ro%24%3Dcw%26o%24ms%24%3D%5B%5D&c1=%26p%24s%24%3D5%26p%24h%24st%24%3D52%26p%24h%24e%24%3D45%26p%24h%24c%24%3Deqo%26p%24sa%24st%24%3D0.6%26p%24sa%24e%24%3D0.9%26p%24sa%24r%24%3D1%26p%24sa%24c%24%3Dl%26p%24b%24st%24%3D0.98%26p%24b%24e%24%3D0.7%26p%24b%24c%24%3Deqi%26o%24n%24%3Dsecondary%26o%24ro%24%3Dccw%26o%24ms%24%3D%5B%5D&c2=%26p%24s%24%3D5%26p%24h%24st%24%3D222%26p%24h%24e%24%3D230%26p%24h%24c%24%3Deqo%26p%24sa%24st%24%3D0.25%26p%24sa%24e%24%3D0.5%26p%24sa%24r%24%3D1%26p%24sa%24c%24%3Deqi%26p%24b%24st%24%3D0.35%26p%24b%24e%24%3D0.16%26p%24b%24c%24%3Dl%26o%24n%24%3Ddark%26o%24ro%24%3Dcw%26o%24ms%24%3D%5B%5D&c3=%26p%24s%24%3D5%26p%24h%24st%24%3D209%26p%24h%24e%24%3D244%26p%24h%24c%24%3Deqo%26p%24sa%24st%24%3D0.58%26p%24sa%24e%24%3D0.66%26p%24sa%24r%24%3D1%26p%24sa%24c%24%3Decio%26p%24b%24st%24%3D1%26p%24b%24e%24%3D0.8%26p%24b%24c%24%3Dl%26o%24n%24%3Dlight%26o%24ro%24%3Dcw%26o%24ms%24%3D%5B%5D&c4=%26p%24s%24%3D3%26p%24h%24st%24%3D66%26p%24h%24e%24%3D69%26p%24h%24c%24%3Deqo%26p%24sa%24st%24%3D0.01%26p%24sa%24e%24%3D0.96%26p%24sa%24r%24%3D1%26p%24sa%24c%24%3Deqo%26p%24b%24st%24%3D1%26p%24b%24e%24%3D0.07%26p%24b%24c%24%3Dl%26o%24n%24%3Dsuccess+Copy%26o%24ro%24%3Dcw%26o%24ms%24%3D%5B%5D&c5=%26p%24s%24%3D3%26p%24h%24st%24%3D66%26p%24h%24e%24%3D69%26p%24h%24c%24%3Deqo%26p%24sa%24st%24%3D0.01%26p%24sa%24e%24%3D0.96%26p%24sa%24r%24%3D1%26p%24sa%24c%24%3Deqo%26p%24b%24st%24%3D1%26p%24b%24e%24%3D0.07%26p%24b%24c%24%3Dl%26o%24n%24%3Derror+Copy%26o%24ro%24%3Dcw%26o%24ms%24%3D%5B%5D&c6=%26p%24s%24%3D3%26p%24h%24st%24%3D66%26p%24h%24e%24%3D69%26p%24h%24c%24%3Deqo%26p%24sa%24st%24%3D0.01%26p%24sa%24e%24%3D0.96%26p%24sa%24r%24%3D1%26p%24sa%24c%24%3Deqo%26p%24b%24st%24%3D1%26p%24b%24e%24%3D0.07%26p%24b%24c%24%3Dl%26o%24n%24%3Dnotice+Copy%26o%24ro%24%3Dcw%26o%24ms%24%3D%5B%5D
 */

export const colors = {
	primary: {
		100: 'hsl(130, 100%, 80%)',
		300: 'hsl(146, 64%, 58%)',
		500: 'hsl(157, 65%, 43%)',
		700: 'hsl(163, 76%, 31%)',
		900: 'hsl(165, 82%, 22%)'
	},
	secondary: {
		100: 'hsl(50, 96%, 69%)',
		300: 'hsl(47, 92%, 64%)',
		500: 'hsl(45, 85%, 57%)',
		700: 'hsl(45, 72%, 48%)',
		900: 'hsl(45, 86%, 39%)'
	},
	light: {
		100: 'hsl(190, 35%, 98%)',
		300: 'hsl(190, 33%, 95%)',
		500: 'hsl(190, 30%, 92%)',
		700: 'hsl(190, 29%, 89%)',
		900: 'hsl(190, 30%, 86%)'
	},
	dark: {
		100: 'hsl(221, 14%, 31%)',
		300: 'hsl(226, 16%, 26%)',
		500: 'hsl(228, 18%, 22%)',
		700: 'hsl(231, 25%, 17%)',
		900: 'hsl(229, 34%, 12%)'
	},
	success: {
		100: 'hsl(103, 70%, 67%)',
		500: 'hsl(103, 53%, 57%)',
		900: 'hsl(103, 45%, 45%)',
	},
	error: {
		100: 'hsl(2, 86%, 69%)',
		500: 'hsl(2, 74%, 59%)',
		900: 'hsl(2, 60%, 49%)',
	},
	notice: {
		100: 'hsl(241, 100%, 77%)',
		500: 'hsl(243, 91%, 69%)',
		900: 'hsl(245, 66%, 57%)',
	}
};

export const cssColors =
	Object.entries(colors)
		.map(([group, shades]) =>
			Object.entries(shades).map(
				([shade, def]) =>
					`--color-${group}-${shade}: ${def}; ` +
					`--rgb-${group}-${shade}: ${Object.values(extractColorComponents(def)).join(
						', '
					)}`
			)
		)
		.reduce((accumulated, current) => [...accumulated, ...current])
		.join('; ') + '; ';

/**
 * @param colorString
 * @returns
 */
export function extractColorComponents(colorString: string) {
	let matched;
	/* rgb */
	matched = colorString
		.match(/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i)
		?.slice(1)
		?.map((comp) => parseInt(comp, 10));
	if (matched) {
		return { r: matched[0], g: matched[1], b: matched[2] };
	}
	/* hsl */
	matched = colorString
		.match(/^hsl\(\s*(\d+)\s*,\s*(\d+(?:\.\d+)?%)\s*,\s*(\d+(?:\.\d+)?%)\s*\)$/i)
		?.slice(1);
	if (matched) {
		return { h: parseInt(matched[0]), s: matched[1], l: matched[2] };
	}
	/* hex */
	matched = colorString
		.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i)
		?.slice(1)
		?.map((comp) => parseInt(comp, 16));
	if (matched) {
		return { r: matched[0], g: matched[1], b: matched[2] };
	}
	matched = colorString
		.match(/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i)
		?.slice(1)
		?.map((comp) => 0x11 * parseInt(comp, 16));
	if (matched) {
		return { r: matched[0], g: matched[1], b: matched[2] };
	}
	throw new Error('No valid matching format found for provided colorString');
}
