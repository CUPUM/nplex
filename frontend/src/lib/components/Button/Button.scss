@use 'utils' as *;

:where(.button) {
	--button-height: calc(var(--ui-height) - 2 * var(--inset, 0px));
	--button-radius: calc(var(--radius, var(--ui-radius-md)) - var(--inset, 0px));
	position: relative;
	display: inline-grid;
	grid-template-columns:
		[full-start leading-padding-start]
		var(--ui-pad-x)
		[leading-padding-end leading-start]
		auto
		[leading-end main-start]
		1fr
		[main-end trailing-start]
		auto
		[trailing-end trailing-padding-start]
		var(--ui-pad-x)
		[trailing-padding-end full-end];
	grid-template-rows: var(--button-height);
	border: none;
	padding: 0;
	font-family: inherit;
	gap: 0;
	flex-direction: row;
	align-items: center;
	font-weight: 400;
	font-size: inherit;
	border-radius: var(--button-radius);
	cursor: pointer;
	letter-spacing: 0em;
	transform-origin: center;
}
.center {
	grid-template-columns:
		[full-start leading-padding-start]
		var(--ui-pad-x)
		[leading-padding-end leading-start]
		1fr
		[leading-end main-start]
		auto
		[main-end trailing-start]
		1fr
		[trailing-end trailing-padding-start]
		var(--ui-pad-x)
		[trailing-padding-end full-end];
}
.equi {
	flex: none;
	aspect-ratio: 1 / 1;
	justify-content: center;
	padding: 0;
	grid-template-columns:
		[full-start leading-padding-start]
		0
		[leading-padding-end leading-start]
		0
		[leading-end main-start]
		var(--button-height)
		[main-end trailing-start]
		0
		[trailing-end trailing-padding-start]
		0
		[trailing-padding-end full-end];
}
.round {
	border-radius: 999px;
}
.disabled,
.button:disabled {
	opacity: 0.25;
	pointer-events: none;
	background: transparent;
	color: col(fg, 100);
	.content {
		transform: scale(0.95);
	}
}
.warning {
	color: col(error, 500);
}
.button:focus {
	.content {
		animation: press 0.25s ease-in-out;
	}
}
.loading {
	.content {
		transform: scale(0.98);
		opacity: 0.25;
	}
}
.content {
	position: relative;
	display: inline-block;
	line-height: 1em;
	padding-bottom: calc(0.5em - 0.5ex);
	white-space: nowrap;
	text-overflow: ellipsis;
	transition: transform 0.1s ease-out;
}
.main {
	grid-column: main;
	.center &,
	.equi & {
		justify-content: center;
		text-align: center;
	}
	.start:not(.equi) & {
		justify-content: left;
		text-align: left;
	}
	.end:not(.equi) & {
		justify-content: right;
		text-align: right;
	}
}
.leading {
	justify-content: flex-start;
	text-align: left;
	grid-column: leading;
	&:not(:empty) {
		padding-right: 0.5em;
	}
}
.trailing {
	justify-content: flex-end;
	text-align: right;
	grid-column: trailing;
	&:not(:empty) {
		padding-left: 0.5em;
	}
}

// Variants

.default {
	color: col(fg, 500);
	background: col(fg, 100, 0.1);
	transition: all 0.1s ease-out;
	:global(.hover-source:hover) &:global(.hover-target),
	&:hover {
		color: col(bg, 700);
		background: col(fg, 500);
	}
	&:global(.active) {
		color: col(bg, 900);
		background: col(fg, 000);
	}
}

.outlined,
.dashed {
	color: col(fg, 500);
	background: transparent;
	transition: all 0.1s ease-out;
	&::before {
		content: '';
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		border-radius: inherit;
		border: 1px solid currentColor;
		transition: all 0.1s ease-out;
		opacity: 0.25;
	}
	:global(.hover-source:hover) &:global(.hover-target),
	&:hover {
		color: col(bg, 700);
		background: col(fg, 500);
		&::before {
			border: 5px solid transparent;
		}
	}
	&:global(.active) {
		color: col(bg, 900);
		background: col(fg, 000);
		&::before {
			border: 5px solid transparent;
		}
	}
}

.dashed {
	&::before {
		border-style: dashed !important;
	}
}

.ghost {
	color: col(fg, 300);
	background: transparent;
	transition: all 0.1s;
	:global(.hover-source:hover) &:global(.hover-target),
	&:hover {
		color: col(fg, 900);
		background: col(bg, 900, 0.5);
	}
	&:global(.active) {
		color: col(primary, 500);
		&:hover {
			background: col(primary, 100, 0.1);
		}
	}
}

.cta {
	color: col(bg, 500);
	background: col(primary, 500);
	box-shadow: 0 0.2em 1em -0.5em col(primary, 300, 0);
	transition: all 0.1s ease-out, box-shadow 0.25s ease-in-out;
	:global(.hover-source:hover) &:global(.hover-target),
	&:hover {
		color: col(primary, 100);
		background: col(primary, 700);
		box-shadow: 0 0.8em 1.5em -1em col(primary, 300, 0.25);
	}
	&:global(.active) {
		filter: brightness(0.9);
		box-shadow: 0 0.5em 1em -0.5em col(primary, 300, 0.5);
	}
}

.danger {
	color: col(error, 500);
	background: col(error, 700, 0.2);
	box-shadow: 0 0.2em 1em -0.5em col(error, 500, 0);
	transition: all 0.1s ease-out, box-shadow 0.2s ease-out;
	:global(.hover-source:hover) &:global(.hover-target),
	&:hover {
		color: rgb(250, 245, 230);
		background: col(error, 700);
	}
	&:global(.active) {
		&:not(.disabled) {
			color: var(--color-error-300);
			background: var(--color-error-900);
		}
	}
}
