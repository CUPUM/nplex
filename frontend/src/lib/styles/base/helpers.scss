@use '../utils' as *;

/**
 * Make an element rounded.
 * Also applies rounding to --radius property for compat with components
 */
.rounded {
	--radius: 999px !important;
	border-radius: var(--radius);
}

/**
 * Remove scrollbar but keep scrollability of element with overflow auto or overflow scroll.
 */
.noscrollbar {
	@include noscrollbar;
}

/**
 * Animate element when focused
 */
.focuspress {
	@include focuspress;
}

.subtle {
	opacity: 0.5;
}

.text-tabular {
	font-variant-numeric: tabular-nums;
}

/**
 * .text-{size}
 * .heading-{size}
 */
@each $level, $sizes in $typography-system {
	@each $size, $properties in $sizes {
		.#{$level}-#{$size} {
			@include typography($level, $size);
		}
	}
}

// .flex {
// 	display: flex;
// }
// .flex-c {
// 	display: flex;
// 	flex-direction: column;
// }
// .flex-r {
// 	display: flex;
// 	flex-direction: row;
// }
// .flex-none {
// 	flex: none;
// }
// .flex-1 {
// 	flex: 1;
// }

// @each $size in (sm, md, lg) {
// 	.gap-#{$size} {
// 		gap: var(--ui-gap-#{$size});
// 	}
// }

// /**
//  * .w-p-{size}
//  * .w-p-min-{size}
//  * .w-p-max-{size}
//  * Paragraph width in sizes relatives to character height:
//  */
// @each $size, $ch in (xs: 35, sm: 50, md: 70, lg: 90) {
// 	.w-p-#{$size} {
// 		width: #{$ch}ch;
// 	}
// 	.w-p-min-#{$size} {
// 		min-width: #{$ch}ch;
// 	}
// 	.w-p-max-#{$size} {
// 		max-width: #{$ch}ch;
// 	}
// }

/**
 * Loading skeleton.
 * Give a placeholder / suspense element a pulsing gradient animation.
 */
.skeleton {
	@mixin skeleton-base {
		--ui-skeleton-color: #{col(fg, 500, 0.05)};
		background: linear-gradient(
			-90deg,
			var(--ui-skeleton-color) 0%,
			transparent 50%,
			var(--ui-skeleton-color) 100%
		);
		background-size: 400% 100%;
		animation: skeleton-pulse 1.3s ease-in-out infinite;
	}

	@include skeleton-base;

	&-text {
		@include skeleton-base;
		height: 1em;
		border-radius: var(--ui-radius-sm);
	}

	&-fill {
		@include skeleton-base;
		z-index: 1;
		width: 100%;
		height: 100%;
		border-radius: inherit;
		position: absolute;
		top: 0;
		left: 0;
	}
}

/**
 * Animate outline around element when focused
 */
.focus-outline-within,
.focus-outline-visible {
	@mixin focuseoutline {
		&::after {
			pointer-events: none;
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			border-radius: inherit;
			outline-offset: 0px;
			outline-color: var(--ui-outline-color);
			transition: all 0.15s;
		}
		&:focus-within,
		&:focus-visible {
			&::after {
				outline: var(--ui-outline-active);
				outline-color: var(--ui-outline-color);
			}
		}
	}

	// Excluding outlined variants
	&:not(.outlined):not(.dashed) {
		@include focuseoutline;

		&:has(&) {
			&::after {
				outline: none;
			}
		}
	}
}
